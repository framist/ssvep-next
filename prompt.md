行动纲要：重构 QuickSSVEP 为现代可视化范式构建工具

最终目标：创建一个单页面应用（SPA），用户可以通过拖拽、配置属性的方式，在画布上直观地设计 SSVEP 刺激界面，并能一键运行或分享该设计。

第一阶段：技术选型与项目初始化 (地基) [已完成大部分]

1.  前端框架选择：
    -   推荐：React 或 Vue.js。两者都拥有强大的生态系统和组件化能力，非常适合构建复杂的交互界面。React 在社区和招聘市场上可能稍占优势。
    -   备选：Svelte。更轻量，编译时处理，性能优异，但生态相对小一些。
    -   **当前状态：已选择 React [已完成]**

2.  项目脚手架：
    -   使用 Vite 创建项目 (npm create vite@latest)。Vite 提供极快的冷启动和热更新（HMR），开发体验远超传统的 create-react-app。
    -   **当前状态：已使用 Vite [已完成]**

3.  拖拽与画布库：
    -   核心推荐：`dnd-kit` (用于 React)。它是一个现代、轻量、高性能、可访问的拖拽库，提供了构建复杂拖拽体验所需的所有底层工具。
    -   备选：React-DnD (功能强大但 API 稍复杂)，或 SortableJS (更专注于列表排序)。
    -   **当前状态：已引入 `dnd-kit` [已完成]**

4.  UI 组件库：
    -   推荐：MUI (Material-UI) 或 Ant Design。它们提供了一整套高质量、开箱即用的组件（如滑块、输入框、对话框），可以极大加速开发。
    -   **当前状态：待定，建议引入 MUI 或 Ant Design 以加速 UI 开发。**

5.  状态管理：
    -   推荐：Zustand 或 Redux Toolkit。对于这个项目，Zustand 可能更简单、更轻量。当画布上的组件和配置变得复杂时，需要一个可靠的状态管理器。
    -   **当前状态：已引入 Zustand (`canvasStore.ts`) [已完成]**

第二阶段：核心功能开发 (主体结构) [进行中]

1.  画布区域 (`Canvas`):
    -   实现一个主区域，作为拖拽目标。
    -   用户可以从“组件面板”将“刺激方块”拖拽到这个区域。
    -   画布应支持网格吸附功能，方便对齐。
    -   **当前状态：`Canvas.tsx` 已存在，需完善拖拽放置逻辑、网格吸附和组件渲染。**

2.  组件面板 (`Toolbox`):
    -   侧边栏，包含可拖拽的元素，初期只有一个：“刺激方块 (StimulusBox)”。
    -   未来可扩展至其他元素，如文本标签、图像等。
    -   **当前状态：`Toolbox.tsx` 已存在，需实现可拖拽的“刺激方块”组件。**

3.  属性面板 (`PropertiesPanel`):
    -   当用户点击画布上的某个“刺激方块”时，此面板会显示其可配置的属性。
    -   核心属性：
        -   id: 唯一标识符。
        -   frequency: 闪烁频率 (Hz)。
        -   text: 方块上显示的文字。
        -   position: (x, y) 坐标 (由拖拽决定)。
        -   size: (width, height) 尺寸 (可拖拽调整大小)。
        -   color: 闪烁颜色。
    -   使用 UI 组件库中的滑块、输入框等来实现配置。
    -   **当前状态：`PropertiesPanel.tsx` 已存在，需实现选中组件后显示其属性并允许编辑。**

4.  刺激渲染引擎：
    -   这是项目的核心科学部分。重用并优化原项目基于 requestAnimationFrame 的逻辑。
    -   创建一个独立的 StimulationEngine 类或 React Hook (useStimulation)。
    -   当用户点击“运行”时，引擎读取当前画布上所有方块的配置，并在一个全屏的“运行模式”下精确地渲染它们的闪烁。
    -   支持用户可以选择不同的波形闪烁（如正弦波、方波等）。
    -   具备 debug 信息展示（如浏览器显示频率、设定频率、当前实际频率）。
    -   **当前状态：`useStimulation.ts` 已存在，需完善刺激渲染逻辑、全屏模式切换和 debug 信息展示。**

第三阶段：高级功能与完善 (装修与增强) [未开始]

1.  全局配置：
    -   实现一个全局设置区域，用于配置：
        -   实验持续时间 (Duration)。
        -   背景颜色。
        -   数据记录与日志选项。

2.  布局与响应式设计：
    -   确保整个界面在不同屏幕尺寸下都能良好工作。画布区域可能需要支持缩放和平移。

3.  保存与加载：
    -   本地存储：将用户设计的范式布局（一个描述所有组件及其属性的 JSON 对象）保存到浏览器的 localStorage 中。
    -   文件导入/导出：允许用户将设计导出为 JSON 文件，或从文件导入。

4.  一键分享 (Auto Link):
    -   重做原项目的“Get auto link”功能。将描述布局的 JSON 对象进行 Base64 编码或 URI 编码，并作为 URL 参数。
    -   当应用加载时，检查 URL 参数。如果存在，则直接解析并渲染该范式，实现“一键复现”。

5.  打包与部署：
    -   使用 Vite 的 build 命令打包应用。
    -   可以轻松部署到 GitHub Pages, Vercel, 或 Netlify 等静态网站托管平台。